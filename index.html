<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QA Manager</title>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
    <link rel="stylesheet" href="style.css" />
    <script
      src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"
      defer
      crossorigin="anonymous"
    ></script>
  </head>
  <body data-theme="dark">
    <div id="authShell" class="auth-shell">
      <div class="auth-shell__brand">
        <div class="brand-icon" aria-hidden="true">üß™</div>
        <div class="brand-text">
          <h1>QA Manager</h1>
          <p>Orquestre lojas, ambientes e execu√ß√µes de QA em um s√≥ lugar.</p>
        </div>
      </div>

      <section id="authLogin" class="auth-card is-visible">
        <h2>Entrar</h2>
        <p class="muted">Acesse o painel com seu e-mail e senha.</p>
        <form id="loginForm" class="auth-form">
          <div class="field">
            <label for="loginEmail">E-mail</label>
            <input type="email" id="loginEmail" autocomplete="email" required />
          </div>
          <div class="field">
            <label for="loginPassword">Senha</label>
            <input
              type="password"
              id="loginPassword"
              autocomplete="current-password"
              required
            />
          </div>
          <p id="loginFeedback" class="form-feedback" role="alert"></p>
          <button type="submit" class="primary full-width">Entrar</button>
        </form>
        <div class="auth-links">
          <button type="button" class="link-button" data-auth-target="authRegister">
            Criar conta
          </button>
          <button type="button" class="link-button" data-auth-target="authReset">
            Esqueci minha senha
          </button>
        </div>
      </section>

      <section id="authRegister" class="auth-card">
        <h2>Criar conta</h2>
        <p class="muted">Cadastre-se para come√ßar a gerenciar o seu programa de QA.</p>
        <form id="registerForm" class="auth-form">
          <div class="field">
            <label for="registerName">Nome</label>
            <input type="text" id="registerName" autocomplete="name" />
          </div>
          <div class="field">
            <label for="registerEmail">E-mail</label>
            <input type="email" id="registerEmail" autocomplete="email" required />
          </div>
          <div class="field">
            <label for="registerPassword">Senha</label>
            <input
              type="password"
              id="registerPassword"
              autocomplete="new-password"
              minlength="6"
              required
            />
          </div>
          <div class="field">
            <label for="registerConfirm">Confirmar senha</label>
            <input
              type="password"
              id="registerConfirm"
              autocomplete="new-password"
              minlength="6"
              required
            />
          </div>
          <p id="registerFeedback" class="form-feedback" role="alert"></p>
          <button type="submit" class="primary full-width">Criar conta</button>
        </form>
        <div class="auth-links">
          <button type="button" class="link-button" data-auth-target="authLogin">
            J√° tenho conta
          </button>
        </div>
      </section>

      <section id="authReset" class="auth-card">
        <h2>Redefinir senha</h2>
        <p class="muted">Informe seu e-mail e enviaremos um link de recupera√ß√£o.</p>
        <form id="resetForm" class="auth-form">
          <div class="field">
            <label for="resetEmail">E-mail</label>
            <input type="email" id="resetEmail" autocomplete="email" required />
          </div>
          <p id="resetFeedback" class="form-feedback" role="alert"></p>
          <button type="submit" class="primary full-width">Enviar link</button>
        </form>
        <div class="auth-links">
          <button type="button" class="link-button" data-auth-target="authLogin">
            Voltar ao login
          </button>
        </div>
      </section>
    </div>

    <div id="appShell" class="app-shell is-hidden">
      <header class="app-header">
        <div class="brand">
          <div class="brand-icon" aria-hidden="true">üß™</div>
          <div class="brand-text">
            <h1>QA Manager</h1>
            <p>Orquestre lojas, ambientes e execu√ß√µes de QA em um s√≥ lugar.</p>
          </div>
        </div>
        <div class="header-actions">
          <button id="btnNovaLoja" class="primary">+ Nova Loja</button>
          <div id="userActions" class="user-actions">
            <div class="user-info">
              <span class="user-info__label">Bem-vindo(a)</span>
              <strong id="userDisplayName">Usu√°rio</strong>
            </div>
            <button id="btnOpenProfile" class="ghost">Perfil</button>
            <button id="btnSignOut" class="ghost">Sair</button>
          </div>
        </div>
      </header>

      <main>
        <section id="secDashboard" class="view is-visible">
          <div class="section-heading section-heading--dashboard">
            <div class="section-heading__content">
              <p class="section-heading__eyebrow">Vis√£o geral do programa</p>
              <h2>Painel de Lojas</h2>
              <p class="muted">
                Acompanhe rapidamente quais lojas fazem parte do programa de QA,
                acesse seus detalhes e utilize as estat√≠sticas, filtros e atalhos
                para agir sem perder tempo.
              </p>
            </div>
            <aside
              class="section-heading__meta"
              aria-label="Sincroniza√ß√£o e prefer√™ncias de visualiza√ß√£o"
            >
              <div class="heading-card" aria-live="polite">
                <span class="heading-card__label">√öltima atualiza√ß√£o</span>
                <strong id="dashboardLastSynced" class="heading-card__value">‚Äî</strong>
                <button
                  type="button"
                  id="btnDashboardRefresh"
                  class="ghost heading-card__action"
                >
                  Atualizar agora
                </button>
              </div>
              <div class="heading-card">
                <span class="heading-card__label">Modo de exibi√ß√£o</span>
                <div
                  class="heading-card__group"
                  role="group"
                  aria-label="Escolher modo de visualiza√ß√£o"
                >
                  <button type="button" class="chip is-active" data-dashboard-view="grid">
                    Cards
                  </button>
                  <button type="button" class="chip" data-dashboard-view="list">
                    Lista
                  </button>
                </div>
                <span id="dashboardViewModeLabel" class="heading-card__hint">Cards</span>
              </div>
            </aside>
          </div>
          <div class="dashboard-overview">
            <section class="dashboard-stats" aria-live="polite">
              <article class="stat-card">
                <span class="stat-card__label">Lojas monitoradas</span>
                <strong id="dashboardStatStores" class="stat-card__value">0</strong>
                <span class="stat-card__hint"
                  ><span id="dashboardStatActive">0</span> com execu√ß√µes</span
                >
              </article>
              <article class="stat-card">
                <span class="stat-card__label">Cen√°rios cadastrados</span>
                <strong id="dashboardStatScenarios" class="stat-card__value"
                  >0</strong
                >
                <span class="stat-card__hint">Atualizado em tempo real</span>
              </article>
              <article class="stat-card">
                <span class="stat-card__label">Cobertura m√©dia</span>
                <strong id="dashboardStatCoverage" class="stat-card__value"
                  >‚Äî</strong
                >
                <span class="stat-card__hint">Baseada na √∫ltima execu√ß√£o</span>
              </article>
              <article class="stat-card">
                <span class="stat-card__label">Ambientes ativos</span>
                <strong
                  id="dashboardStatEnvironments"
                  class="stat-card__value"
                  >0</strong
                >
                <span class="stat-card__hint">Monitorados pelo time</span>
              </article>
              <article class="stat-card">
                <span class="stat-card__label">Lojas aguardando aten√ß√£o</span>
                <strong id="dashboardStatIdle" class="stat-card__value">0</strong>
                <span class="stat-card__hint">
                  Sem execu√ß√µes ou ambientes configurados
                </span>
              </article>
            </section>
            <aside class="dashboard-quick-actions">
              <div>
                <h3>Atalhos r√°pidos</h3>
                <p class="muted">
                  Acelere as rotinas di√°rias do time de QA com um clique.
                </p>
              </div>
              <div class="dashboard-quick-actions__buttons">
                <button type="button" id="btnDashboardNewStore" class="primary">
                  + Nova loja
                </button>
                <button type="button" id="btnDashboardOpenProfile" class="ghost">
                  Prefer√™ncias
                </button>
                <button type="button" id="btnDashboardToggleTheme" class="ghost">
                  Usar modo claro
                </button>
              </div>
              <div class="dashboard-quick-actions__meta" aria-live="polite">
                <div class="meta-stat">
                  <span class="label">Pend√™ncias do time</span>
                  <strong id="dashboardQuickIdle">0</strong>
                  <p class="muted small">
                    Lojas aguardando configura√ß√£o ou execu√ß√£o.
                  </p>
                </div>
                <div class="meta-stat">
                  <span class="label">Visualiza√ß√£o atual</span>
                  <strong id="dashboardQuickView">Cards</strong>
                  <p class="muted small">
                    Altere conforme a necessidade do squad.
                  </p>
                </div>
              </div>
              <ul class="dashboard-quick-actions__list">
                <li>Cadastre lojas e ambientes em poucos cliques.</li>
                <li>Filtre e ordene para encontrar rapidamente o que precisa.</li>
                <li>Exporte a base de cen√°rios em Markdown ou PDF.</li>
              </ul>
            </aside>
          </div>
          <div
            class="dashboard-toolbar"
            role="region"
            aria-label="Ferramentas do painel"
          >
            <div class="toolbar-field">
              <label for="dashboardSearch" class="label">Buscar loja</label>
              <div class="input-with-icon">
                <span class="input-with-icon__icon" aria-hidden="true">üîç</span>
                <input
                  type="search"
                  id="dashboardSearch"
                  placeholder="Buscar por nome, site ou descri√ß√£o"
                  autocomplete="off"
                />
              </div>
            </div>
            <div class="toolbar-field">
              <label for="dashboardSort" class="label">Ordenar por</label>
              <select id="dashboardSort">
                <option value="recent">Mais recentes</option>
                <option value="name">Nome (A ‚Üí Z)</option>
                <option value="coverage">Maior cobertura</option>
                <option value="scenarios">Mais cen√°rios</option>
              </select>
            </div>
            <div class="toolbar-field">
              <label for="dashboardFilter" class="label">Exibir</label>
              <select id="dashboardFilter">
                <option value="all">Todas as lojas</option>
                <option value="with-execution">Com execu√ß√µes</option>
                <option value="without-execution">Sem execu√ß√µes</option>
              </select>
            </div>
            <div class="toolbar-field toolbar-field--actions">
              <span class="label">Ajustes r√°pidos</span>
              <div class="toolbar-actions">
                <button type="button" id="btnDashboardResetFilters" class="ghost">
                  Limpar filtros
                </button>
              </div>
            </div>
          </div>
          <div
            class="dashboard-chips"
            role="toolbar"
            aria-label="Filtros r√°pidos do painel"
          >
            <button
              type="button"
              class="chip is-active"
              data-dashboard-filter="all"
              aria-pressed="true"
            >
              Todas
              <span class="chip__count" data-dashboard-filter-count="all">0</span>
            </button>
            <button
              type="button"
              class="chip"
              data-dashboard-filter="with-execution"
              aria-pressed="false"
            >
              Com execu√ß√µes
              <span class="chip__count" data-dashboard-filter-count="with-execution">0</span>
            </button>
            <button
              type="button"
              class="chip"
              data-dashboard-filter="without-execution"
              aria-pressed="false"
            >
              Sem execu√ß√µes
              <span class="chip__count" data-dashboard-filter-count="without-execution">0</span>
            </button>
          </div>
          <div class="dashboard-analytics">
            <article class="card card--analytics" aria-live="polite">
              <div class="card-header">
                <div>
                  <p class="card-subtitle">Cobertura de testes</p>
                  <h3>Comparativo entre lojas</h3>
                </div>
                <span id="dashboardCoverageSummary" class="badge"
                  >M√©dia geral: ‚Äî</span
                >
              </div>
              <p class="muted small">
                Visualize o status consolidado da √∫ltima execu√ß√£o registrada em
                cada loja.
              </p>
              <div id="dashboardCoverageList" class="coverage-list"></div>
            </article>
          </div>
          <div
            id="dashboardStores"
            class="dashboard-stores"
            data-view="grid"
            aria-live="polite"
          ></div>
        </section>

        <section id="secLoja" class="view">
          <div class="topbar">
            <button id="btnVoltarDashboard" class="ghost">‚Üê Voltar</button>
            <h2 id="lojaTitulo"></h2>
          </div>

          <div class="card card--overview">
            <div class="card-header">
              <div>
                <p class="card-subtitle">Resumo da loja</p>
              </div>
              <div class="card-actions">
                <button id="btnEditarLoja" class="ghost">Editar loja</button>
                <button id="btnExcluirLoja" class="ghost danger">Excluir loja</button>
              </div>
            </div>
            <p id="lojaDescricao" class="muted"></p>
            <div class="info-grid">
              <div>
                <span class="label">Site oficial</span>
                <a
                  id="lojaSite"
                  class="link"
                  href="#"
                  target="_blank"
                  rel="noopener"
                ></a>
              </div>
              <div>
                <span class="label">Total de cen√°rios</span>
                <strong id="lojaTotalCenarios">0</strong>
              </div>
              <div>
                <span class="label">Ambientes ativos</span>
                <strong id="lojaTotalAmbientes">0</strong>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Cadastrar cen√°rio</h3>
            </div>
            <form id="scenarioForm" class="grid-form">
              <div class="field">
                <label for="scenarioTitle">T√≠tulo</label>
                <input type="text" id="scenarioTitle" required />
              </div>
              <div class="field">
                <label for="scenarioCategory">Categoria</label>
                <input type="text" id="scenarioCategory" required />
              </div>
              <div class="field">
                <label for="scenarioAutomation">Automa√ß√£o</label>
                <select id="scenarioAutomation">
                  <option value="Automatizado">Automatizado</option>
                  <option value="N√£o Automatizado">N√£o Automatizado</option>
                </select>
              </div>
              <div class="field">
                <label for="scenarioCluster">Cluster</label>
                <select id="scenarioCluster">
                  <option value="Desktop">Desktop</option>
                  <option value="Mobile">Mobile</option>
                  <option value="Ambos">Ambos</option>
                </select>
              </div>
              <div class="field field--wide">
                <label for="scenarioObs">Observa√ß√µes</label>
                <textarea
                  id="scenarioObs"
                  rows="2"
                  placeholder="Informa√ß√µes adicionais, links, pr√©-condi√ß√µes..."
                ></textarea>
              </div>
              <div class="form-actions">
                <button type="submit" class="primary">Adicionar cen√°rio</button>
              </div>
            </form>

            <div class="scenario-toolbar">
              <div class="scenario-toolbar__filters">
                <label for="scenarioCategoryFilter">Filtrar por categoria</label>
                <select id="scenarioCategoryFilter">
                  <option value="all">Todas as categorias</option>
                </select>
              </div>
              <div class="scenario-toolbar__actions">
                <div class="scenario-toolbar__group">
                  <button type="button" id="btnImportCsv" class="ghost">
                    Importar CSV
                  </button>
                  <button type="button" id="btnImportJson" class="ghost">
                    Importar JSON
                  </button>
                </div>
                <div class="scenario-toolbar__group">
                  <button type="button" id="btnExportMarkdown" class="ghost">
                    Exportar Markdown
                  </button>
                  <button type="button" id="btnExportPdf" class="ghost">
                    Exportar PDF
                  </button>
                </div>
              </div>
            </div>
            <input
              type="file"
              id="scenarioImportInput"
              accept=".csv,application/json,.json"
              style="display: none"
            />

            <table id="cenariosTabela"></table>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Ambientes</h3>
              <button id="btnNovoAmbiente" class="primary">+ Criar ambiente</button>
            </div>
            <p class="muted">
              Crie ambientes de execu√ß√£o para acompanhar o progresso dos
              cen√°rios desta loja.
            </p>
            <div id="ambientesList" class="grid"></div>
          </div>
        </section>

        <section id="secAmbiente" class="view">
          <div class="topbar">
            <button id="btnVoltarLoja" class="ghost">‚Üê Voltar</button>
            <h2 id="ambienteTitulo"></h2>
          </div>

          <div class="card" id="ambienteResumo">
            <div class="info-grid">
              <div>
                <span class="label">Loja</span>
                <strong id="ambienteLoja">-</strong>
              </div>
              <div>
                <span class="label">Tipo</span>
                <strong id="ambienteKind">-</strong>
              </div>
              <div>
                <span class="label">Identificador</span>
                <strong id="ambienteIdentifier">-</strong>
              </div>
              <div>
                <span class="label">Tipo de teste</span>
                <strong id="ambienteTestType">-</strong>
              </div>
              <div>
                <span class="label">Cen√°rios</span>
                <strong id="ambienteTotalCenarios">0</strong>
              </div>
            </div>
            <p id="ambienteNotes" class="muted"></p>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Execu√ß√£o dos cen√°rios</h3>
            </div>
            <ul id="cenariosExecucao" class="scenario-list"></ul>
          </div>
        </section>

        <section id="secProfile" class="view">
          <div class="topbar">
            <button id="btnProfileBack" class="ghost">‚Üê Voltar</button>
            <h2>Perfil do usu√°rio</h2>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Informa√ß√µes pessoais</h3>
            </div>
            <form id="profileForm" class="grid-form">
              <div class="field">
                <label for="profileName">Nome</label>
                <input type="text" id="profileName" autocomplete="name" />
              </div>
              <div class="field">
                <label for="profileEmail">E-mail</label>
                <input type="email" id="profileEmail" readonly />
              </div>
              <div class="field field--wide">
                <span class="label">Prefer√™ncias de apar√™ncia</span>
                <div class="theme-options">
                  <label class="theme-option">
                    <input type="radio" name="profileTheme" value="light" />
                    <span>Modo claro</span>
                  </label>
                  <label class="theme-option">
                    <input type="radio" name="profileTheme" value="dark" />
                    <span>Modo escuro</span>
                  </label>
                </div>
                <p class="muted small">
                  Escolha como deseja visualizar o QA Manager. Essa prefer√™ncia
                  ser√° aplicada em todas as sess√µes.
                </p>
              </div>
              <p id="profileFeedback" class="form-feedback" role="alert"></p>
              <div class="form-actions">
                <button type="submit" class="primary">Salvar prefer√™ncias</button>
              </div>
            </form>
          </div>
        </section>
      </main>

      <footer>
        <small>QA Manager ¬∑ Integra√ß√£o com Firebase Firestore</small>
      </footer>

      <div class="modal" id="modalStore" role="dialog" aria-hidden="true">
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="storeFormTitle">Nova loja</h3>
            <button type="button" class="icon-button" data-modal-close>√ó</button>
          </div>
          <form id="storeForm" class="modal-body">
            <div class="field">
              <label for="storeName">Nome</label>
              <input id="storeName" name="storeName" type="text" required />
            </div>
            <div class="field">
              <label for="storeSite">Site</label>
              <input
                id="storeSite"
                name="storeSite"
                type="url"
                placeholder="https://exemplo.com"
              />
            </div>
            <div class="field">
              <label for="storeDescription">Descri√ß√£o</label>
              <textarea
                id="storeDescription"
                name="storeDescription"
                rows="3"
                placeholder="Breve resumo sobre a loja ou o produto"
              ></textarea>
            </div>
            <div class="modal-actions">
              <button type="button" class="ghost" data-modal-close>Cancelar</button>
              <button type="submit" id="storeFormSubmit" class="primary">
                Salvar loja
              </button>
            </div>
          </form>
        </div>
      </div>

      <div class="modal" id="modalEnvironment" role="dialog" aria-hidden="true">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Novo ambiente</h3>
            <button type="button" class="icon-button" data-modal-close>√ó</button>
          </div>
          <form id="environmentForm" class="modal-body">
            <p class="muted">Loja selecionada: <span id="environmentStoreName"></span></p>
            <div class="field">
              <label for="environmentKind">Tipo de ambiente</label>
              <input
                id="environmentKind"
                name="environmentKind"
                type="text"
                placeholder="Ex.: WS, TM, App..."
                required
              />
            </div>
            <div class="field">
              <label for="environmentTestType">Tipo de teste</label>
              <select id="environmentTestType" name="environmentTestType">
                <option value="Regressivo">Regressivo</option>
                <option value="Smoke">Smoke</option>
                <option value="Explorat√≥rio">Explorat√≥rio</option>
                <option value="Performance">Performance</option>
              </select>
            </div>
            <div class="field">
              <label for="environmentIdentifier">Identificador</label>
              <input
                id="environmentIdentifier"
                name="environmentIdentifier"
                type="text"
                placeholder="ex.: ws-qa"
                required
              />
            </div>
            <div class="field">
              <label for="environmentNotes">Observa√ß√µes</label>
              <textarea
                id="environmentNotes"
                name="environmentNotes"
                rows="3"
                placeholder="Detalhes adicionais, links, credenciais..."
              ></textarea>
            </div>
            <div class="modal-actions">
              <button type="button" class="ghost" data-modal-close>Cancelar</button>
              <button type="submit" class="primary">Criar ambiente</button>
            </div>
          </form>
        </div>
      </div>

      <div class="modal" id="modalConfirm" role="dialog" aria-hidden="true">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Confirma√ß√£o</h3>
            <button type="button" class="icon-button" data-modal-close>√ó</button>
          </div>
          <div class="modal-body">
            <p id="confirmMessage"></p>
          </div>
          <div class="modal-actions">
            <button type="button" class="ghost" data-modal-close>Cancelar</button>
            <button type="button" class="danger" id="confirmOk">Confirmar</button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="script.js"></script>
  </body>
</html>
