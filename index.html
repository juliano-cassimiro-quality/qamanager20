<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QA Manager</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body data-theme="dark">
    <div id="authShell" class="auth-shell">
      <div class="auth-shell__brand">
        <div class="brand-icon" aria-hidden="true">üß™</div>
        <div class="brand-text">
          <h1>QA Manager</h1>
          <p>Orquestre lojas, ambientes e execu√ß√µes de QA em um s√≥ lugar.</p>
        </div>
      </div>

      <section id="authLogin" class="auth-card is-visible">
        <h2>Entrar</h2>
        <p class="muted">Acesse o painel com seu e-mail e senha.</p>
        <form id="loginForm" class="auth-form">
          <div class="field">
            <label for="loginEmail">E-mail</label>
            <input type="email" id="loginEmail" autocomplete="email" required />
          </div>
          <div class="field">
            <label for="loginPassword">Senha</label>
            <input
              type="password"
              id="loginPassword"
              autocomplete="current-password"
              required
            />
          </div>
          <p id="loginFeedback" class="form-feedback" role="alert"></p>
          <button type="submit" class="primary full-width">Entrar</button>
        </form>
        <div class="auth-links">
          <button type="button" class="link-button" data-auth-target="authRegister">
            Criar conta
          </button>
          <button type="button" class="link-button" data-auth-target="authReset">
            Esqueci minha senha
          </button>
        </div>
      </section>

      <section id="authRegister" class="auth-card">
        <h2>Criar conta</h2>
        <p class="muted">Cadastre-se para come√ßar a gerenciar o seu programa de QA.</p>
        <form id="registerForm" class="auth-form">
          <div class="field">
            <label for="registerName">Nome</label>
            <input type="text" id="registerName" autocomplete="name" />
          </div>
          <div class="field">
            <label for="registerEmail">E-mail</label>
            <input type="email" id="registerEmail" autocomplete="email" required />
          </div>
          <div class="field">
            <label for="registerPassword">Senha</label>
            <input
              type="password"
              id="registerPassword"
              autocomplete="new-password"
              minlength="6"
              required
            />
          </div>
          <div class="field">
            <label for="registerConfirm">Confirmar senha</label>
            <input
              type="password"
              id="registerConfirm"
              autocomplete="new-password"
              minlength="6"
              required
            />
          </div>
          <p id="registerFeedback" class="form-feedback" role="alert"></p>
          <button type="submit" class="primary full-width">Criar conta</button>
        </form>
        <div class="auth-links">
          <button type="button" class="link-button" data-auth-target="authLogin">
            J√° tenho conta
          </button>
        </div>
      </section>

      <section id="authReset" class="auth-card">
        <h2>Redefinir senha</h2>
        <p class="muted">Informe seu e-mail e enviaremos um link de recupera√ß√£o.</p>
        <form id="resetForm" class="auth-form">
          <div class="field">
            <label for="resetEmail">E-mail</label>
            <input type="email" id="resetEmail" autocomplete="email" required />
          </div>
          <p id="resetFeedback" class="form-feedback" role="alert"></p>
          <button type="submit" class="primary full-width">Enviar link</button>
        </form>
        <div class="auth-links">
          <button type="button" class="link-button" data-auth-target="authLogin">
            Voltar ao login
          </button>
        </div>
      </section>
    </div>

    <div id="appShell" class="app-shell is-hidden">
      <header class="app-header">
        <div class="brand">
          <div class="brand-icon" aria-hidden="true">üß™</div>
          <div class="brand-text">
            <h1>QA Manager</h1>
            <p>Orquestre lojas, ambientes e execu√ß√µes de QA em um s√≥ lugar.</p>
          </div>
        </div>
        <div class="header-actions">
          <button id="btnNovaLoja" class="primary">+ Nova Loja</button>
          <div id="userActions" class="user-actions">
            <div class="user-info">
              <span class="user-info__label">Bem-vindo(a)</span>
              <strong id="userDisplayName">Usu√°rio</strong>
            </div>
            <button id="btnOpenProfile" class="ghost">Perfil</button>
            <button id="btnSignOut" class="ghost">Sair</button>
          </div>
        </div>
      </header>

      <main>
        <section id="secDashboard" class="view is-visible">
          <div class="section-heading">
            <div>
              <h2>Painel de Lojas</h2>
              <p class="muted">
                Acompanhe rapidamente quais lojas fazem parte do programa de QA e
                acesse seus detalhes.
              </p>
            </div>
          </div>
          <div id="dashboardStores" class="grid"></div>
        </section>

        <section id="secLoja" class="view">
          <div class="topbar">
            <button id="btnVoltarDashboard" class="ghost">‚Üê Voltar</button>
            <h2 id="lojaTitulo"></h2>
          </div>

          <div class="card card--overview">
            <div class="card-header">
              <div>
                <p class="card-subtitle">Resumo da loja</p>
              </div>
              <div class="card-actions">
                <button id="btnEditarLoja" class="ghost">Editar loja</button>
                <button id="btnExcluirLoja" class="ghost danger">Excluir loja</button>
              </div>
            </div>
            <p id="lojaDescricao" class="muted"></p>
            <div class="info-grid">
              <div>
                <span class="label">Site oficial</span>
                <a
                  id="lojaSite"
                  class="link"
                  href="#"
                  target="_blank"
                  rel="noopener"
                ></a>
              </div>
              <div>
                <span class="label">Total de cen√°rios</span>
                <strong id="lojaTotalCenarios">0</strong>
              </div>
              <div>
                <span class="label">Ambientes ativos</span>
                <strong id="lojaTotalAmbientes">0</strong>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Cadastrar cen√°rio</h3>
            </div>
            <form id="scenarioForm" class="grid-form">
              <div class="field">
                <label for="scenarioTitle">T√≠tulo</label>
                <input type="text" id="scenarioTitle" required />
              </div>
              <div class="field">
                <label for="scenarioCategory">Categoria</label>
                <input type="text" id="scenarioCategory" required />
              </div>
              <div class="field">
                <label for="scenarioAutomation">Automa√ß√£o</label>
                <select id="scenarioAutomation">
                  <option value="Automatizado">Automatizado</option>
                  <option value="N√£o Automatizado">N√£o Automatizado</option>
                </select>
              </div>
              <div class="field">
                <label for="scenarioCluster">Cluster</label>
                <select id="scenarioCluster">
                  <option value="Desktop">Desktop</option>
                  <option value="Mobile">Mobile</option>
                  <option value="Ambos">Ambos</option>
                </select>
              </div>
              <div class="field field--wide">
                <label for="scenarioObs">Observa√ß√µes</label>
                <textarea
                  id="scenarioObs"
                  rows="2"
                  placeholder="Informa√ß√µes adicionais, links, pr√©-condi√ß√µes..."
                ></textarea>
              </div>
              <div class="form-actions">
                <button type="submit" class="primary">Adicionar cen√°rio</button>
              </div>
            </form>

            <div class="scenario-toolbar">
              <div class="scenario-toolbar__filters">
                <label for="scenarioCategoryFilter">Filtrar por categoria</label>
                <select id="scenarioCategoryFilter">
                  <option value="all">Todas as categorias</option>
                </select>
              </div>
              <div class="scenario-toolbar__actions">
                <div class="scenario-toolbar__group">
                  <button type="button" id="btnImportCsv" class="ghost">
                    Importar CSV
                  </button>
                  <button type="button" id="btnImportJson" class="ghost">
                    Importar JSON
                  </button>
                </div>
                <div class="scenario-toolbar__group">
                  <button type="button" id="btnExportMarkdown" class="ghost">
                    Exportar Markdown
                  </button>
                  <button type="button" id="btnExportJson" class="ghost">
                    Exportar JSON
                  </button>
                  <button type="button" id="btnExportPdf" class="ghost">
                    Exportar PDF
                  </button>
                </div>
                <div class="scenario-toolbar__group">
                  <button
                    type="button"
                    id="btnToggleStoreScenarioTable"
                    class="ghost"
                    data-expanded-label="Minimizar tabela"
                    data-collapsed-label="Expandir tabela"
                    aria-expanded="true"
                  >
                    Minimizar tabela
                  </button>
                </div>
              </div>
            </div>
            <input
              type="file"
              id="scenarioImportInput"
              accept=".csv,application/json,.json"
              style="display: none"
            />

            <div class="table-wrapper" id="storeScenarioTableWrapper">
              <table id="cenariosTabela"></table>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Ambientes</h3>
              <button id="btnNovoAmbiente" class="primary">+ Criar ambiente</button>
            </div>
            <p class="muted">
              Crie ambientes de execu√ß√£o para acompanhar o progresso dos
              cen√°rios desta loja.
            </p>
            <div id="ambientesList" class="grid"></div>
          </div>
        </section>

        <section id="secAmbiente" class="view">
          <div class="topbar">
            <button id="btnVoltarLoja" class="ghost">‚Üê Voltar</button>
            <h2 id="ambienteTitulo"></h2>
          </div>

          <div class="card" id="ambienteResumo">
            <div class="info-grid">
              <div>
                <span class="label">Loja</span>
                <strong id="ambienteLoja">-</strong>
              </div>
              <div>
                <span class="label">Tipo</span>
                <strong id="ambienteKind">-</strong>
              </div>
              <div>
                <span class="label">Identificador</span>
                <strong id="ambienteIdentifier">-</strong>
              </div>
              <div>
                <span class="label">Tipo de teste</span>
                <strong id="ambienteTestType">-</strong>
              </div>
              <div>
                <span class="label">Cen√°rios</span>
                <strong id="ambienteTotalCenarios">0</strong>
              </div>
            </div>
            <p id="ambienteNotes" class="muted"></p>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Execu√ß√£o dos cen√°rios</h3>
            </div>
            <div id="ambienteScenarioFilters" class="scenario-toolbar is-hidden">
              <div class="scenario-toolbar__filters">
                <label for="ambienteScenarioCategoryFilter"
                  >Filtrar por categoria</label
                >
                <select id="ambienteScenarioCategoryFilter">
                  <option value="all">Todas as categorias</option>
                </select>
              </div>
              <div class="scenario-toolbar__actions">
                <div class="scenario-toolbar__group">
                  <button
                    type="button"
                    id="btnAmbienteExportMarkdown"
                    class="ghost"
                  >
                    Exportar Markdown
                  </button>
                  <button
                    type="button"
                    id="btnAmbienteExportPdf"
                    class="ghost"
                  >
                    Exportar PDF
                  </button>
                </div>
                <div class="scenario-toolbar__group">
                  <button
                    type="button"
                    id="btnToggleAmbienteScenarioTable"
                    class="ghost"
                    data-expanded-label="Minimizar tabela"
                    data-collapsed-label="Expandir tabela"
                    aria-expanded="true"
                  >
                    Minimizar tabela
                  </button>
                </div>
              </div>
            </div>
            <div class="table-wrapper" id="ambienteScenarioTableWrapper">
              <table id="ambienteCenariosTabela"></table>
            </div>
          </div>
        </section>

        <section id="secProfile" class="view">
          <div class="topbar">
            <button id="btnProfileBack" class="ghost">‚Üê Voltar</button>
            <h2>Perfil do usu√°rio</h2>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Informa√ß√µes pessoais</h3>
            </div>
            <form id="profileForm" class="grid-form">
              <div class="field">
                <label for="profileName">Nome</label>
                <input type="text" id="profileName" autocomplete="name" />
              </div>
              <div class="field">
                <label for="profileEmail">E-mail</label>
                <input type="email" id="profileEmail" readonly />
              </div>
              <div class="field field--wide">
                <span class="label">Prefer√™ncias de apar√™ncia</span>
                <div class="theme-options">
                  <label class="theme-option">
                    <input type="radio" name="profileTheme" value="light" />
                    <span>Modo claro</span>
                  </label>
                  <label class="theme-option">
                    <input type="radio" name="profileTheme" value="dark" />
                    <span>Modo escuro</span>
                  </label>
                </div>
                <p class="muted small">
                  Escolha como deseja visualizar o QA Manager. Essa prefer√™ncia
                  ser√° aplicada em todas as sess√µes.
                </p>
              </div>
              <p id="profileFeedback" class="form-feedback" role="alert"></p>
              <div class="form-actions">
                <button type="submit" class="primary">Salvar prefer√™ncias</button>
              </div>
            </form>
          </div>
        </section>
      </main>

      <footer>
        <small>QA Manager ¬∑ Integra√ß√£o com Firebase Firestore</small>
      </footer>

      <div class="modal" id="modalStore" role="dialog" aria-hidden="true">
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="storeFormTitle">Nova loja</h3>
            <button type="button" class="icon-button" data-modal-close>√ó</button>
          </div>
          <form id="storeForm" class="modal-body">
            <div class="field">
              <label for="storeName">Nome</label>
              <input id="storeName" name="storeName" type="text" required />
            </div>
            <div class="field">
              <label for="storeSite">Site</label>
              <input
                id="storeSite"
                name="storeSite"
                type="url"
                placeholder="https://exemplo.com"
              />
            </div>
            <div class="field">
              <label for="storeDescription">Descri√ß√£o</label>
              <textarea
                id="storeDescription"
                name="storeDescription"
                rows="3"
                placeholder="Breve resumo sobre a loja ou o produto"
              ></textarea>
            </div>
            <div class="modal-actions">
              <button type="button" class="ghost" data-modal-close>Cancelar</button>
              <button type="submit" id="storeFormSubmit" class="primary">
                Salvar loja
              </button>
            </div>
          </form>
        </div>
      </div>

      <div class="modal" id="modalEnvironment" role="dialog" aria-hidden="true">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Novo ambiente</h3>
            <button type="button" class="icon-button" data-modal-close>√ó</button>
          </div>
          <form id="environmentForm" class="modal-body">
            <p class="muted">Loja selecionada: <span id="environmentStoreName"></span></p>
            <div class="field">
              <label for="environmentKind">Tipo de ambiente</label>
              <input
                id="environmentKind"
                name="environmentKind"
                type="text"
                placeholder="Ex.: WS, TM, App..."
                required
              />
            </div>
            <div class="field">
              <label for="environmentTestType">Tipo de teste</label>
              <select id="environmentTestType" name="environmentTestType">
                <option value="Regressivo">Regressivo</option>
                <option value="Smoke">Smoke</option>
                <option value="Explorat√≥rio">Explorat√≥rio</option>
                <option value="Performance">Performance</option>
              </select>
            </div>
            <div class="field">
              <label for="environmentIdentifier">Identificador</label>
              <input
                id="environmentIdentifier"
                name="environmentIdentifier"
                type="text"
                placeholder="ex.: ws-qa"
                required
              />
            </div>
            <div class="field">
              <label for="environmentNotes">Observa√ß√µes</label>
              <textarea
                id="environmentNotes"
                name="environmentNotes"
                rows="3"
                placeholder="Detalhes adicionais, links, credenciais..."
              ></textarea>
            </div>
            <div class="modal-actions">
              <button type="button" class="ghost" data-modal-close>Cancelar</button>
              <button type="submit" class="primary">Criar ambiente</button>
            </div>
          </form>
        </div>
      </div>

      <div class="modal" id="modalConfirm" role="dialog" aria-hidden="true">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Confirma√ß√£o</h3>
            <button type="button" class="icon-button" data-modal-close>√ó</button>
          </div>
          <div class="modal-body">
            <p id="confirmMessage"></p>
          </div>
          <div class="modal-actions">
            <button type="button" class="ghost" data-modal-close>Cancelar</button>
            <button type="button" class="danger" id="confirmOk">Confirmar</button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="script.js"></script>
  </body>
</html>
