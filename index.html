<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QA Manager</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="app-header">
        <div class="brand">
          <div class="brand-icon" aria-hidden="true">üß™</div>
          <div class="brand-text">
            <h1>QA Manager</h1>
            <p>Orquestre lojas, ambientes e execu√ß√µes de QA em um s√≥ lugar.</p>
          </div>
        </div>
        <div class="header-actions">
          <button id="btnNovaLoja" class="primary">+ Nova Loja</button>
        </div>
      </header>

      <main>
        <section id="secDashboard" class="view is-visible">
          <div class="section-heading">
            <div>
              <h2>Painel de Lojas</h2>
              <p class="muted">
                Acompanhe rapidamente quais lojas fazem parte do programa de QA e
                acesse seus detalhes.
              </p>
            </div>
          </div>
          <div id="dashboardStores" class="grid"></div>
        </section>

        <section id="secLoja" class="view">
          <div class="topbar">
            <button id="btnVoltarDashboard" class="ghost">‚Üê Voltar</button>
            <h2 id="lojaTitulo"></h2>
          </div>

          <div class="card card--overview">
            <div class="card-header">
              <div>
                <p class="card-subtitle">Resumo da loja</p>
              </div>
              <div class="card-actions">
                <button id="btnEditarLoja" class="ghost">Editar loja</button>
                <button id="btnExcluirLoja" class="ghost danger">
                  Excluir loja
                </button>
              </div>
            </div>
            <p id="lojaDescricao" class="muted"></p>
            <div class="info-grid">
              <div>
                <span class="label">Site oficial</span>
                <a
                  id="lojaSite"
                  class="link"
                  href="#"
                  target="_blank"
                  rel="noopener"
                ></a>
              </div>
              <div>
                <span class="label">Total de cen√°rios</span>
                <strong id="lojaTotalCenarios">0</strong>
              </div>
              <div>
                <span class="label">Ambientes ativos</span>
                <strong id="lojaTotalAmbientes">0</strong>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Cadastrar cen√°rio</h3>
            </div>
            <form id="scenarioForm" class="grid-form">
              <div class="field">
                <label for="scenarioTitle">T√≠tulo</label>
                <input type="text" id="scenarioTitle" required />
              </div>
              <div class="field">
                <label for="scenarioCategory">Categoria</label>
                <input type="text" id="scenarioCategory" required />
              </div>
              <div class="field">
                <label for="scenarioAutomation">Automa√ß√£o</label>
                <select id="scenarioAutomation">
                  <option value="Automatizado">Automatizado</option>
                  <option value="N√£o Automatizado">N√£o Automatizado</option>
                </select>
              </div>
              <div class="field">
                <label for="scenarioCluster">Cluster</label>
                <select id="scenarioCluster">
                  <option value="Desktop">Desktop</option>
                  <option value="Mobile">Mobile</option>
                  <option value="Ambos">Ambos</option>
                </select>
              </div>
              <div class="field field--wide">
                <label for="scenarioObs">Observa√ß√µes</label>
                <textarea
                  id="scenarioObs"
                  rows="2"
                  placeholder="Informa√ß√µes adicionais, links, pr√©-condi√ß√µes..."
                ></textarea>
              </div>
              <div class="form-actions">
                <button type="submit" class="primary">Adicionar cen√°rio</button>
              </div>
            </form>

            <table id="cenariosTabela"></table>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Ambientes</h3>
              <button id="btnNovoAmbiente" class="primary">
                + Criar ambiente
              </button>
            </div>
            <p class="muted">
              Crie ambientes de execu√ß√£o para acompanhar o progresso dos
              cen√°rios desta loja.
            </p>
            <div id="ambientesList" class="grid"></div>
          </div>
        </section>

        <section id="secAmbiente" class="view">
          <div class="topbar">
            <button id="btnVoltarLoja" class="ghost">‚Üê Voltar</button>
            <h2 id="ambienteTitulo"></h2>
          </div>

          <div class="card" id="ambienteResumo">
            <div class="info-grid">
              <div>
                <span class="label">Loja</span>
                <strong id="ambienteLoja">-</strong>
              </div>
              <div>
                <span class="label">Tipo</span>
                <strong id="ambienteKind">-</strong>
              </div>
              <div>
                <span class="label">Identificador</span>
                <strong id="ambienteIdentifier">-</strong>
              </div>
              <div>
                <span class="label">Tipo de teste</span>
                <strong id="ambienteTestType">-</strong>
              </div>
              <div>
                <span class="label">Cen√°rios</span>
                <strong id="ambienteTotalCenarios">0</strong>
              </div>
            </div>
            <p id="ambienteNotes" class="muted"></p>
          </div>

          <div class="card">
            <div class="card-header">
              <h3>Execu√ß√£o dos cen√°rios</h3>
            </div>
            <ul id="cenariosExecucao" class="scenario-list"></ul>
          </div>
        </section>
      </main>

      <footer>
        <small>QA Manager ¬∑ Integra√ß√£o com Firebase Firestore</small>
      </footer>
    </div>

    <!-- Modal Nova/Editar Loja -->
    <div class="modal" id="modalStore" role="dialog" aria-hidden="true">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="storeFormTitle">Nova loja</h3>
          <button type="button" class="icon-button" data-modal-close>
            √ó
          </button>
        </div>
        <form id="storeForm" class="modal-body">
          <div class="field">
            <label for="storeName">Nome</label>
            <input id="storeName" name="storeName" type="text" required />
          </div>
          <div class="field">
            <label for="storeSite">Site</label>
            <input
              id="storeSite"
              name="storeSite"
              type="url"
              placeholder="https://exemplo.com"
            />
          </div>
          <div class="field">
            <label for="storeDescription">Descri√ß√£o</label>
            <textarea
              id="storeDescription"
              name="storeDescription"
              rows="3"
              placeholder="Breve resumo sobre a loja ou o produto"
            ></textarea>
          </div>
          <div class="modal-actions">
            <button type="button" class="ghost" data-modal-close>
              Cancelar
            </button>
            <button type="submit" id="storeFormSubmit" class="primary">
              Salvar loja
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal Ambiente -->
    <div
      class="modal"
      id="modalEnvironment"
      role="dialog"
      aria-hidden="true"
    >
      <div class="modal-content">
        <div class="modal-header">
          <h3>Novo ambiente</h3>
          <button type="button" class="icon-button" data-modal-close>
            √ó
          </button>
        </div>
        <form id="environmentForm" class="modal-body">
          <p class="muted">Loja selecionada: <span id="environmentStoreName"></span></p>
          <div class="field">
            <label for="environmentKind">Tipo de ambiente</label>
            <input
              id="environmentKind"
              name="environmentKind"
              type="text"
              placeholder="Ex.: WS, TM, App..."
              required
            />
          </div>
          <div class="field">
            <label for="environmentTestType">Tipo de teste</label>
            <select id="environmentTestType" name="environmentTestType">
              <option value="Regressivo">Regressivo</option>
              <option value="Smoke">Smoke</option>
              <option value="Explorat√≥rio">Explorat√≥rio</option>
              <option value="Performance">Performance</option>
            </select>
          </div>
          <div class="field">
            <label for="environmentIdentifier">Identificador</label>
            <input
              id="environmentIdentifier"
              name="environmentIdentifier"
              type="text"
              placeholder="ex.: ws-qa"
              required
            />
          </div>
          <div class="field">
            <label for="environmentNotes">Observa√ß√µes</label>
            <textarea
              id="environmentNotes"
              name="environmentNotes"
              rows="3"
              placeholder="Detalhes adicionais, links, credenciais..."
            ></textarea>
          </div>
          <div class="modal-actions">
            <button type="button" class="ghost" data-modal-close>
              Cancelar
            </button>
            <button type="submit" class="primary">Criar ambiente</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal Confirma√ß√£o -->
    <div class="modal" id="modalConfirm" role="dialog" aria-hidden="true">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Confirma√ß√£o</h3>
          <button type="button" class="icon-button" data-modal-close>
            √ó
          </button>
        </div>
        <div class="modal-body">
          <p id="confirmMessage"></p>
        </div>
        <div class="modal-actions">
          <button type="button" class="ghost" data-modal-close>Cancelar</button>
          <button type="button" class="danger" id="confirmOk">Confirmar</button>
        </div>
      </div>
    </div>

    <script type="module" src="script.js"></script>
  </body>
</html>
